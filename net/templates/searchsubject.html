$def with (Render)

$ S = sessionmaker(bind=DB)()

$ SubjectsList = S.query(Subject).order_by(Subject.code)
$ Questions = S.query(QuestionsSubject)

<!DOCTYPE html>
<html>
  <head>
    $:Render.includes()
    <title>$BaseTitle - Busca de Disciplinas</title>
  </head>
  <body>
    <!-- Fixed navbar -->
    $:Render.navbar()
    <!-- Begin page content -->
    <div class="container"  id="disciplinas">
      <div class="row">
        <div class="col-sm-6">
          <h3>Busca de Disciplinas</h3>
          <input type="text" class="search" placeholder="Busca por código, nome ou critério"> <br>
        </div>
      </div>
            <div class="scrollable-area" style="overflow-y: scroll; height:360px;">
              <table class="table table-striped table-condensed sortable">
                <thead>
                  <tr>
                    <th style="width:5%">Código</th>
                    <th>Nome</th>
                    <th style="width:14%" class="text-right"> Necessária </th>
                    <th style="width:14%" class="text-right"> Ementa </th>
                    <th style="width:14%" class="text-right"> Dedicação </th>
                    <th style="width:14%" class="text-right"> Dificuldade </th>

                  </tr>
                </thead>
                <tbody class="list">
                $for Line in SubjectsList:
                  $ URL = Line.EncodeURL()
                  $ line_of_interest = S.query(SubjectDisplay).filter(Line.id == SubjectDisplay.subject_id).one()
                  <tr>
                    <td>
                      <a class="codigo black-link" href="$URL">$Line.code</a>
                    </td>
                    <td>
                      <a class="nome black-link" href="$URL">$Line.name</a>
                    </td>
                    $ s1 = line_of_interest.q1_resp
                    $ rand1 = line_of_interest.q1_porc
                    $ q1 = ' %s %d%%' % (s1,rand1)
                    $ s3 = line_of_interest.q3_resp
                    $ rand3 = line_of_interest.q3_porc
                    $ q3 = ' %s %d%%' % (s3,rand3)
                    $ s4 = line_of_interest.q4_resp
                    $ rand4 = line_of_interest.q4_porc
                    $ q4 = ' %s %d%%' % (s4,rand4)
                    $ s5 = line_of_interest.q5_resp
                    $ rand5 = line_of_interest.q5_porc
                    $ q5 = ' %s %d%%' % (s5,rand5)
                  <td class="quest1 text-right">$q1</td>
                  <td class="quest2 text-right">$q3</td>
                  <td class="quest3 text-right">$q4</td>
                  <td class="quest4 text-right">$q5</td>
                  </tr>
                </tbody>
              </table>
            </div>
        <script>
          var options = {
            valueNames: ['codigo','nome','quest1','quest2','quest3','quest4']
          };
          var userList = new List('disciplinas', options);
        </script>
      </div>
    </div>
  </div>
    $:Render.footer()
  </body>
</html>
